(function(e){function t(e){for(var t={},n=e.split(","),s=0;n.length>s;s++)t[n[s]]=!0,t[n[s].toUpperCase()]=!0;return t}var n,s,r,o=/^<([\w:-]+)((?:\s*[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,a=/^<\/([\w:-]+)[^>]*>/,i=/\/>$/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,c=/^<!DOCTYPE [^>]+>/i,p=/<(%|\?)/,u=/(%|\?)>/,d=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),m=t("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),h=t("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),f=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),g=t("script,style"),b={},v=e.HTMLParser=function(e,t){function v(e,n,s,r){for(var o=!1;!t.html5&&k.last()&&m[k.last()];)y("",k.last());if(h[n]&&k.last()===n&&y("",n),r=d[n]||!!r,r?o=e.match(i):k.push(n),t.start){var a=[];s.replace(l,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:f[t]?t:"";a.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,"$1&quot;")})}),t.start&&t.start(n,a,r,o)}}function y(e,n){var s;if(n)for(s=k.length-1;s>=0&&k[s]!==n;s--);else s=0;if(s>=0){for(var r=k.length-1;r>=s;r--)t.end&&t.end(k[r]);k.length=s}}var $,x,E,C,w,k=[],D=e;for(k.last=function(){return this[this.length-1]};e;){if(x=!0,k.last()&&g[k.last()])n=k.last().toLowerCase(),s=b[n]||(b[n]=RegExp("([\\s\\S]*?)</"+n+"[^>]*>","i")),e=e.replace(s,function(e,s){return"script"!==n&&"style"!==n&&(s=s.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,"$1")),t.chars&&t.chars(s),""}),y("",n);else if(0===e.indexOf("<!--")?($=e.indexOf("-->"),$>=0&&(t.comment&&t.comment(e.substring(4,$)),e=e.substring($+3),x=!1)):0===e.search(p)?($=e.search(u),$>=0&&(t.ignore&&t.ignore(e.substring(0,$+2)),e=e.substring($+2),x=!1)):(E=c.exec(e))?(t.doctype&&t.doctype(E[0]),e=e.substring(E[0].length),x=!1):0===e.indexOf("</")?(E=e.match(a),E&&(e=e.substring(E[0].length),E[0].replace(a,y),C="/"+E[1],x=!1)):0===e.indexOf("<")&&(E=e.match(o),E&&(e=e.substring(E[0].length),E[0].replace(o,v),C=E[1],x=!1)),x){$=e.indexOf("<");var T=0>$?e:e.substring(0,$);e=0>$?"":e.substring($),r=e.match(o),r?w=r[1]:(r=e.match(a),w=r?"/"+r[1]:""),t.chars&&t.chars(T,C,w)}if(e===D)throw"Parse Error: "+e;D=e}y()};e.HTMLtoXML=function(e){var t="";return v(e,{start:function(e,n,s){t+="<"+e;for(var r=0;n.length>r;r++)t+=" "+n[r].name+'="'+n[r].escaped+'"';t+=(s?"/":"")+">"},end:function(e){t+="</"+e+">"},chars:function(e){t+=e},comment:function(e){t+="<!--"+e+"-->"},ignore:function(e){t+=e}}),t},e.HTMLtoDOM=function(e,n){var s=t("html,head,body,title"),r={link:"head",base:"head"};n?n=n.ownerDocument||n.getOwnerDocument&&n.getOwnerDocument()||n:"undefined"!=typeof DOMDocument?n=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?n=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(n=new ActiveXObject("Msxml.DOMDocument"));var o=[],a=n.documentElement||n.getDocumentElement&&n.getDocumentElement();if(!a&&n.createElement&&function(){var e=n.createElement("html"),t=n.createElement("head");t.appendChild(n.createElement("title")),e.appendChild(t),e.appendChild(n.createElement("body")),n.appendChild(e)}(),n.getElementsByTagName)for(var i in s)s[i]=n.getElementsByTagName(i)[0];var l=s.body;return v(e,{start:function(e,t,a){if(s[e])return l=s[e],void 0;var i=n.createElement(e);for(var c in t)i.setAttribute(t[c].name,t[c].value);r[e]&&"boolean"!=typeof s[r[e]]?s[r[e]].appendChild(i):l&&l.appendChild&&l.appendChild(i),a||(o.push(i),l=i)},end:function(){o.length-=1,l=o[o.length-1]},chars:function(e){l.appendChild(n.createTextNode(e))},comment:function(){},ignore:function(){}}),n}})("undefined"==typeof exports?this:exports),function(e){function t(e){return e.replace(/\s+/g," ")}function n(e,t,n){var s=["a","abbr","acronym","b","bdi","bdo","big","button","cite","code","del","dfn","em","font","i","ins","kbd","mark","q","rt","rp","s","samp","small","span","strike","strong","sub","sup","time","tt","u","var"];return t&&"img"!==t&&("/"!==t.substr(0,1)||"/"===t.substr(0,1)&&-1===s.indexOf(t.substr(1)))&&(e=e.replace(/^\s+/,"")),n&&"img"!==n&&("/"===n.substr(0,1)||"/"!==n.substr(0,1)&&-1===s.indexOf(n))&&(e=e.replace(/\s+$/,"")),t&&n?e.replace(/[\t\n\r]+/g," ").replace(/[ ]+/g," "):e}function s(e){return/\[if[^\]]+\]/.test(e)||/\s*(<!\[endif\])$/.test(e)}function r(e){return/^!/.test(e)}function o(e){return/^on[a-z]+/.test(e)}function a(e){return/^[^\x20\t\n\f\r"'`=<>]+$/.test(e)&&!/\/$/.test(e)&&!/\/$/.test(e)}function i(e,t){for(var n=e.length;n--;)if(e[n].name.toLowerCase()===t)return!0;return!1}function l(e,t,n,s){return n=L(n.toLowerCase()),"script"===e&&"language"===t&&"javascript"===n||"form"===e&&"method"===t&&"get"===n||"input"===e&&"type"===t&&"text"===n||"script"===e&&"charset"===t&&!i(s,"src")||"a"===e&&"name"===t&&i(s,"id")||"area"===e&&"shape"===t&&"rect"===n}function c(e,t,n){return"script"===e&&"type"===t&&"text/javascript"===L(n.toLowerCase())}function p(e,t,n){return("style"===e||"link"===e)&&"type"===t&&"text/css"===L(n.toLowerCase())}function u(e){return/^(?:allowfullscreen|async|autofocus|checked|compact|declare|default|defer|disabled|formnovalidate|hidden|inert|ismap|itemscope|multiple|muted|nohref|noresize|noshade|novalidate|nowrap|open|readonly|required|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/.test(e)}function d(e,t){return/^(?:a|area|link|base)$/.test(t)&&"href"===e||"img"===t&&/^(?:src|longdesc|usemap)$/.test(e)||"object"===t&&/^(?:classid|codebase|data|usemap)$/.test(e)||"q"===t&&"cite"===e||"blockquote"===t&&"cite"===e||("ins"===t||"del"===t)&&"cite"===e||"form"===t&&"action"===e||"input"===t&&("src"===e||"usemap"===e)||"head"===t&&"profile"===e||"script"===t&&("src"===e||"for"===e)}function m(e,t){return/^(?:a|area|object|button)$/.test(t)&&"tabindex"===e||"input"===t&&("maxlength"===e||"tabindex"===e)||"select"===t&&("size"===e||"tabindex"===e)||"textarea"===t&&/^(?:rows|cols|tabindex)$/.test(e)||"colgroup"===t&&"span"===e||"col"===t&&"span"===e||("th"===t||"td"===t)&&("rowspan"===e||"colspan"===e)}function h(e,n,s){return o(n)?L(s).replace(/^javascript:\s*/i,"").replace(/\s*;$/,""):"class"===n?t(L(s)):d(n,e)||m(n,e)?L(s):"style"===n?L(s).replace(/\s*;\s*$/,""):s}function f(e){return e.replace(/^(\[[^\]]+\]>)\s*/,"$1").replace(/\s*(<!\[endif\])$/,"$1")}function g(e){return e.replace(/^(?:\s*\/\*\s*<!\[CDATA\[\s*\*\/|\s*\/\/\s*<!\[CDATA\[.*)/,"").replace(/(?:\/\*\s*\]\]>\s*\*\/|\/\/\s*\]\]>)\s*$/,"")}function b(e,t){return e.replace(O[t],"").replace(j[t],"")}function v(e){return/^(?:html|t?body|t?head|tfoot|tr|td|th|option|source)$/.test(e)}function y(e,t,n){var s=/^(["'])?\s*\1$/.test(n);return s?"input"===e&&"value"===t||M.test(t):!1}function $(e){return"textarea"!==e}function x(e){return!/^(?:script|style|pre|textarea)$/.test(e)}function E(e){return!/^(?:pre|textarea)$/.test(e)}function C(e,t,n,s){var r,o=s.caseSensitive?e.name:e.name.toLowerCase(),i=e.escaped;return s.removeRedundantAttributes&&l(n,o,i,t)||s.removeScriptTypeAttributes&&c(n,o,i)||s.removeStyleLinkTypeAttributes&&p(n,o,i)?"":(i=h(n,o,i),s.removeAttributeQuotes&&a(i)||(i='"'+i+'"'),s.removeEmptyAttributes&&y(n,o,i)?"":(r=s.collapseBooleanAttributes&&u(o)?o:o+"="+i," "+r))}function w(e){for(var t=["canCollapseWhitespace","canTrimWhitespace"],n=0,s=t.length;s>n;n++)e[t[n]]||(e[t[n]]=function(){return!1})}function k(e,o){function a(e,t){return x(e)||o.canCollapseWhitespace(e,t)}function i(e,t){return E(e)||o.canTrimWhitespace(e,t)}o=o||{},e=L(e),w(o);var l=[],c=[],p="",u="",d=[],m=[],h=[],y=o.lint,k=new Date;T(e,{html5:o.html5!==void 0?o.html5:!0,start:function(e,t,n,s){e=e.toLowerCase(),u=e,p="",d=t,o.collapseWhitespace&&(i(e,t)||m.push(e),a(e,t)||h.push(e)),c.push("<",e),y&&y.testElement(e);for(var r=0,l=t.length;l>r;r++)y&&y.testAttribute(e,t[r].name.toLowerCase(),t[r].escaped),c.push(C(t[r],t,e,o));c.push((s&&o.keepClosingSlash?"/":"")+">")},end:function(e){o.collapseWhitespace&&(m.length&&e===m[m.length-1]&&m.pop(),h.length&&e===h[h.length-1]&&h.pop());var t=""===p&&e===u;return o.removeEmptyElements&&t&&$(e)?(c.splice(c.lastIndexOf("<")),void 0):(o.removeOptionalTags&&v(e)||(c.push("</",e.toLowerCase(),">"),l.push.apply(l,c),c.length=0,p=""),void 0)},chars:function(e,s,r){("script"===u||"style"===u)&&(o.removeCommentsFromCDATA&&(e=b(e,u)),o.removeCDATASectionsFromCDATA&&(e=g(e)),"script"===u&&o.compressJs&&(e=A.minify(e,{fromString:!0}).code)),o.collapseWhitespace&&(m.length||(e=s||r?n(e,s,r):L(e)),h.length||(e=t(e))),p=e,y&&y.testChars(e),c.push(e)},comment:function(e){e=o.removeComments?s(e)?"<!--"+f(e)+"-->":r(e)?"<!--"+e+"-->":"":"<!--"+e+"-->",c.push(e)},ignore:function(e){c.push(o.removeIgnored?"":e)},doctype:function(e){c.push(o.useShortDoctype?"<!DOCTYPE html>":t(e))}}),l.push.apply(l,c);var O=l.join("");return D("minified in: "+(new Date-k)+"ms"),O}var D,T,A;D=e.console&&e.console.log?function(t){e.console.log(t)}:function(){},T=e.HTMLParser||require("./htmlparser").HTMLParser,A=e.uglify||require("uglify-js");var L=function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")};String.prototype.trim&&(L=function(e){return e.trim()});var O={script:/^\s*(?:\/\/)?\s*<!--.*\n?/,style:/^\s*<!--\s*/},j={script:/\s*(?:\/\/)?\s*-->\s*$/,style:/\s*-->\s*$/},M=RegExp("^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(?:down|up|over|move|out)|key(?:press|down|up)))$");"undefined"!=typeof exports?exports.minify=k:e.minify=k}(this),function(e){function t(e){return/^(?:b|i|big|small|hr|blink|marquee)$/.test(e)}function n(e){return/^(?:applet|basefont|center|dir|font|isindex|s|strike|u)$/.test(e)}function s(e){return/^on[a-z]+/.test(e)}function r(e){return"style"===e.toLowerCase()}function o(e,t){return"align"===t&&/^(?:caption|applet|iframe|img|imput|object|legend|table|hr|div|h[1-6]|p)$/.test(e)||"alink"===t&&"body"===e||"alt"===t&&"applet"===e||"archive"===t&&"applet"===e||"background"===t&&"body"===e||"bgcolor"===t&&/^(?:table|t[rdh]|body)$/.test(e)||"border"===t&&/^(?:img|object)$/.test(e)||"clear"===t&&"br"===e||"code"===t&&"applet"===e||"codebase"===t&&"applet"===e||"color"===t&&/^(?:base(?:font)?)$/.test(e)||"compact"===t&&/^(?:dir|[dou]l|menu)$/.test(e)||"face"===t&&/^base(?:font)?$/.test(e)||"height"===t&&/^(?:t[dh]|applet)$/.test(e)||"hspace"===t&&/^(?:applet|img|object)$/.test(e)||"language"===t&&"script"===e||"link"===t&&"body"===e||"name"===t&&"applet"===e||"noshade"===t&&"hr"===e||"nowrap"===t&&/^t[dh]$/.test(e)||"object"===t&&"applet"===e||"prompt"===t&&"isindex"===e||"size"===t&&/^(?:hr|font|basefont)$/.test(e)||"start"===t&&"ol"===e||"text"===t&&"body"===e||"type"===t&&/^(?:li|ol|ul)$/.test(e)||"value"===t&&"li"===e||"version"===t&&"html"===e||"vlink"===t&&"body"===e||"vspace"===t&&/^(?:applet|img|object)$/.test(e)||"width"===t&&/^(?:hr|td|th|applet|pre)$/.test(e)}function a(e,t){return"href"===e&&/^\s*javascript\s*:\s*void\s*(\s+0|\(\s*0\s*\))\s*$/i.test(t)}function i(){this.log=[],this._lastElement=null,this._isElementRepeated=!1}i.prototype.testElement=function(e){n(e)?this.log.push('<li>Found <span class="deprecated-element">deprecated</span> <strong><code>&lt;'+e+"&gt;</code></strong> element</li>"):t(e)?this.log.push('<li>Found <span class="presentational-element">presentational</span> <strong><code>&lt;'+e+"&gt;</code></strong> element</li>"):this.checkRepeatingElement(e)},i.prototype.checkRepeatingElement=function(e){"br"===e&&"br"===this._lastElement?this._isElementRepeated=!0:this._isElementRepeated&&(this._reportRepeatingElement(),this._isElementRepeated=!1),this._lastElement=e},i.prototype._reportRepeatingElement=function(){this.log.push("<li>Found <code>&lt;br></code> sequence. Try replacing it with styling.</li>")},i.prototype.testAttribute=function(e,t,n){s(t)?this.log.push('<li>Found <span class="event-attribute">event attribute</span> (<strong>',t,"</strong>) on <strong><code>&lt;"+e+"&gt;</code></strong> element</li>"):o(e,t)?this.log.push('<li>Found <span class="deprecated-attribute">deprecated</span> <strong>'+t+"</strong> attribute on <strong><code>&lt;",e,"&gt;</code></strong> element</li>"):r(t)?this.log.push('<li>Found <span class="style-attribute">style attribute</span> on <strong><code>&lt;',e,"&gt;</code></strong> element</li>"):a(t,n)&&this.log.push('<li>Found <span class="inaccessible-attribute">inaccessible attribute</span> (on <strong><code>&lt;',e,"&gt;</code></strong> element)</li>")},i.prototype.testChars=function(e){this._lastElement="",/(&nbsp;\s*){2,}/.test(e)&&this.log.push("<li>Found repeating <strong><code>&amp;nbsp;</code></strong> sequence. Try replacing it with styling.</li>")},i.prototype.test=function(e,t,n){this.testElement(e),this.testAttribute(e,t,n)},i.prototype.populate=function(e){this._isElementRepeated&&this._reportRepeatingElement();var t;this.log.length&&e&&(t="<ol>"+this.log.join("")+"</ol>",e.innerHTML=t)},e.HTMLLint=i}("undefined"==typeof exports?this:exports);